# language: zh-CN
功能: 数据库操作
  作为一个钱包机器人
  我需要能够在数据库中创建钱包、记录交易和计算余额
  以便管理用户的钱包数据

  背景:
    假设 数据库已经初始化

  场景: 创建新钱包
    假设 频道 "12345" 不存在钱包 "test_wallet"
    当 我为频道 "12345" 创建钱包 "test_wallet"
    那么 钱包应该创建成功
    并且 初始余额应该是 0.00

  场景: 记录收入交易
    假设 频道 "12345" 已经有钱包 "支付宝"
    当 我记录一笔收入交易 钱包名称为 "支付宝" 月份为 "12月" 年份为 "2024年" 金额为 100.00
    那么 交易应该记录成功
    并且 钱包余额应该增加 100.00

  场景: 记录支出交易
    假设 频道 "12345" 已经有钱包 "微信" 余额为 200.00
    当 我记录一笔支出交易 钱包名称为 "微信" 月份为 "01月" 年份为 "2024年" 金额为 50.00
    那么 交易应该记录成功
    并且 钱包余额应该减少 50.00

  场景: 记录出账交易
    假设 频道 "12345" 已经有钱包 "支付宝" 余额为 500.00
    当 我记录一笔出账交易 钱包名称为 "支付宝" 月份为 "12月" 年份为 "2024年" 金额为 150.00
    那么 交易应该记录成功
    并且 钱包余额应该减少 150.00

  场景: 记录入账交易
    假设 频道 "12345" 已经有钱包 "银行卡" 余额为 300.00
    当 我记录一笔入账交易 钱包名称为 "银行卡" 月份为 "03月" 年份为 "2024年" 金额为 200.00
    那么 交易应该记录成功
    并且 钱包余额应该增加 200.00

  场景: 计算钱包余额
    假设 频道 "12345" 已经有钱包 "支付宝"
    并且 有一笔收入交易 钱包名称为 "支付宝" 月份为 "12月" 年份为 "2024年" 金额为 200.00
    并且 有一笔支出交易 钱包名称为 "支付宝" 月份为 "01月" 年份为 "2024年" 金额为 80.00
    当 我计算钱包余额 钱包名称为 "支付宝"
    那么 余额应该是 120.00

  场景: 获取钱包的交易记录
    假设 频道 "12345" 已经有钱包 "支付宝"
    并且 有一笔收入交易 钱包名称为 "支付宝" 月份为 "12月" 年份为 "2024年" 金额为 100.00
    并且 有一笔支出交易 钱包名称为 "支付宝" 月份为 "01月" 年份为 "2024年" 金额为 30.00
    当 我获取钱包的交易记录 钱包名称为 "支付宝"
    那么 应该返回 2 条交易记录

  场景: 多频道钱包隔离
    假设 频道 "12345" 已经有钱包 "支付宝" 余额为 100.00
    并且 频道 "67890" 已经有钱包 "支付宝" 余额为 200.00
    当 我查询频道 "12345" 的钱包 "支付宝" 余额
    那么 余额应该是 100.00
    当 我查询频道 "67890" 的钱包 "支付宝" 余额
    那么 余额应该是 200.00 